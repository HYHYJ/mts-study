# 5. 타입스크립트의 클래스

- [5. 타입스크립트의 클래스](#5-타입스크립트의-클래스)
  - [5.2 클래스의 타입](#52-클래스의-타입)
    - [5.2.1 클래스 선언은 인스턴스의 타입을 만든다](#521-클래스-선언은-인스턴스의-타입을-만든다)
    - [5.2.2 new 시그니처를 이용한 인스턴스화 가시성 표현](#522-new-시그니처를-이용한-인스턴스화-가시성-표현)
    - [5.2.3 instanceof 연산자와 타입 좁히기](#523-instanceof-연산자와-타입-좁히기)

## 5.2 클래스의 타입

### 5.2.1 클래스 선언은 인스턴스의 타입을 만든다
```ts
class User {
  name: string = "";
  age: number = 0;

  isAdult(): boolean {
    return this.age >= 20;
  }
}

const uhyo = new User();
```
```ts
const uhyo: User = new User();
```
```ts
class User {
  name: string = "";
  age: number = 0;

  isAdult(): boolean {
    return this.age >= 20;
  }
}
// 여기는 당연히 OK
const uhyo: User = new User();
// 여기도 OK!
const john: User = {
  name: "John Smith",
  age: 15,
  isAdult: () => true
};
```
```ts
const User = class {
  name: string = "";
  age: number = 0;

  isAdult(): boolean {
    return this.age >= 20;
  }
};

// 여기는 OK
const uhyo = new User();
// 에러: 'User' refers to a value, but is being used as a type here. Did you mean 'typeof User'?
const john: User = new User();
```
```ts
class User<T> {
  name: string;
  #age: number;
  readonly data: T;

  constructor(name: string, age: number, data: T) {
    this.name = name;
    this.#age = age;
    this.data = data;
  }
}

const uhyo: User<string> = new User("uhyo", 26, "추가 데이터");
```
### 5.2.2 new 시그니처를 이용한 인스턴스화 가시성 표현
```ts
class User {
  name: string = "";
  age: number = 0;
}
```
```ts
class User {
  name: string = "";
  age: number = 0;
}

type MyUserConstructor = new () => User;

// User는 MyUserConstructor 타입
const MyUser: MyUserConstructor = User;
// MyUser는 new에 사용할 수 있다
const u = new MyUser();
// u는 User 타입
console.log(u.name, u.age);
```
```ts
type MyUserConstructor = {
  new (): User;
};
```
### 5.2.3 instanceof 연산자와 타입 좁히기
```ts
class User {
  name: string = "";
  age: number = 0;
}

const uhyo = new User();
// uhyo는 User의 인스턴스이므로 true
console.log(uhyo instanceof User);
// {}는 User의 인스턴스가 아니므로 false
console.log({} instanceof User);

const john: User = {
  name: "John Smith",
  age: 15,
};
// john은 User의 인스턴스가 아니므로 false
console.log(john instanceof User);
```
```ts
type HasAge = {
  age: number;
}

class User {
  name: string;
  age: number;

  constructor(name: string, age: number) {
    this.name = name;
    this.age = age;
  }
}

function getPrice(customer: HasAge) {
  if (customer instanceof User) {
    if (customer.name === "uhyo") {
      return 0;
    }
  }
  return customer.age < 18 ? 1000 : 1800;
}

const customer1: HasAge = { age: 15 };
const customer2: HasAge = { age: 40 };
const uhyo = new User("uhyo", 26);

console.log(getPrice(customer1)); // 1000이라고 출력된다
console.log(getPrice(customer2)); // 1800이라고 출력된다
console.log(getPrice(uhyo));      // 0이라고 출력된다
```
```ts
if (customer instanceof User && customer.name === "uhyo") {
  return 0;
}
```